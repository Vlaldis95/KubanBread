(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var r=0;r<i.length;r++){var o=i[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,n=function(e,i){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(n)?n:String(n)),o)}var n}var i=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._form=i,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._submitButton=this._form.querySelector(this._config.submitButtonSelector),this._email=this._form.querySelector("#id_e_mail")}var i,r;return i=t,(r=[{key:"_showEmailError",value:function(t){switch(!0){case this._email.validity.valueMissing:t.textContent="Заполните это поле";break;case this._email.validity.patternMismatch:case this._email.validity.typeMismatch:t.textContent="Email-адрес должен соответствовать действительному формату"}}},{key:"_showInputError",value:function(t,e){var i=this._form.querySelector(".".concat(t.name,"-error"));t.classList.add(this._config.inputErrorClass),i.classList.add(this._config.errorClass),t===this._email?this._showEmailError(i):i.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.name,"-error"));t.classList.remove(this._config.inputErrorClass),e.classList.remove(this._config.errorClass),e.textContent=""}},{key:"_isValid",value:function(t,e){return t.validity.valid?this._hideInputError(t):this._showInputError(t,e)}},{key:"_deactivateSubmitButton",value:function(){this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.setAttribute("disabled","")}},{key:"_activateSubmitButton",value:function(){this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_toggleBtnForm",value:function(){return this._form.checkValidity()?this._activateSubmitButton():this._deactivateSubmitButton()}},{key:"resetValidation",value:function(){var t=this;this._toggleBtnForm(),this._inputList.forEach((function(e){return t._hideInputError(e)}))}},{key:"_setInputEventListeners",value:function(){var t=this;this._toggleBtnForm(),this._inputList.forEach((function(e){e.addEventListener("input",(function(i){t._isValid(e,e.validationMessage),t._toggleBtnForm()}))})),this._form.addEventListener("reset",(function(){t._deactivateSubmitButton()}))}},{key:"enableValidation",value:function(){this._setInputEventListeners()}}])&&e(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}(),r=document.querySelector(".popup__select_type_chanel"),o=document.querySelector(".popup__select-wrapper_type_tax");Array.from(document.forms).forEach((function(t){new i({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t).enableValidation()})),r.addEventListener("input",(function(t){"Физ.лицо"!==t.target.value?o.classList.remove("popup__select-wrapper_closed"):o.classList.add("popup__select-wrapper_closed")}))})();